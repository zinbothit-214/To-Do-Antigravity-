<div class="task-detail" id="task_detail_<%= @task.id %>">
  <div class="task-header">
    <h1 class="task-title <%= 'completed' if @task.completed %>">
      <%= @task.title %>
    </h1>
    <div class="task-meta">
      <span class="status-badge <%= @task.completed ? 'completed' : 'pending' %>">
        <%= @task.completed ? '✓ Completed' : '○ Pending' %>
      </span>
      <span class="created-date">
        Created: <%= @task.created_at.strftime('%B %d, %Y at %I:%M %p') %>
      </span>
    </div>
  </div>

  <div class="task-description">
    <h2>Description</h2>
    <% if @task.description.present? %>
      <div class="description-content">
        <%= simple_format(@task.description) %>
      </div>
    <% else %>
      <p class="no-description">No description provided.</p>
    <% end %>
  </div>

  <div class="comments-section">
    <h2>Conversations</h2>
    <%= render 'comments/form', task: @task, comment: Comment.new %>
    
    <div id="comments-list">
      <%= render partial: 'comments/comment', collection: @task.comments.order(created_at: :desc) %>
    </div>
  </div>

  <div class="task-actions">
    <%= form_with(model: @task, local: false, method: :patch, class: "toggle-status-form") do |form| %>
      <%= form.hidden_field :completed, value: !@task.completed %>
      <%= form.submit @task.completed ? 'Mark as Pending' : 'Mark as Completed', 
                      class: "status-toggle-btn #{@task.completed ? 'pending' : 'completed'}" %>
    <% end %>
    
    <%= link_to 'Edit Task', edit_task_path(@task), class: 'edit-btn' %>
    <%= link_to 'Back to List', tasks_path, class: 'back-btn' %>
    
    <%= link_to 'Delete', @task, method: :delete, 
                data: { confirm: 'Are you sure you want to delete this task?' }, 
                class: 'delete-btn' %>
  </div>
</div>