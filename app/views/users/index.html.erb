<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>User Management</h1>
    <div class="dashboard-actions">
      <%= link_to 'Add New User', new_user_path, class: 'btn btn-primary' %>
    </div>
  </div>

  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-number"><%= @users.count %></div>
      <div class="stat-label">Total Users</div>
    </div>
    <div class="stat-card">
      <div class="stat-number"><%= @users.admin.count %></div>
      <div class="stat-label">Admins</div>
    </div>
    <div class="stat-card">
      <div class="stat-number"><%= @users.manager.count %></div>
      <div class="stat-label">Managers</div>
    </div>
    <div class="stat-card">
      <div class="stat-number"><%= @users.employee.count %></div>
      <div class="stat-label">Employees</div>
    </div>
  </div>

  <div class="main-content">
    <div class="table-responsive">
      <table class="users-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Role</th>
            <th>Department</th>
            <th>Tasks</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @users.each do |user| %>
            <tr>
              <td>
                <div class="user-name-cell">
                  <strong><%= link_to user.name, user_path(user), style: "text-decoration: none; color: inherit;" %></strong>
                  <% if user == current_user %>
                    <span class="badge-status" style="background: #007bff; margin-left: 5px;">You</span>
                  <% end %>
                </div>
              </td>
              <td><%= user.email %></td>
              <td>
                <span class="badge-priority <%= user.role %>">
                  <%= user.role.humanize %>
                </span>
              </td>
              <td><%= user.department&.name || 'N/A' %></td>
              <td>
                <%= link_to tasks_user_path(user), class: 'tasks-count-link' do %>
                  <%= user.assigned_tasks.count %> Assigned
                <% end %>
              </td>
              <td>
                <div class="task-card-actions">
                  <%= link_to 'Edit', edit_user_path(user), class: 'btn-task-action' %>
                  <% unless user == current_user %>
                    <%= link_to 'Delete', user_path(user), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn-task-action action-delete' %>
                  <% end %>
                </div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<style>
  .users-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 8px;
    margin-top: -8px;
  }
  
  .users-table th {
    text-align: left;
    padding: 12px 16px;
    font-size: 11px;
    font-weight: 800;
    color: #94a3b8;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  .users-table tr {
    background: white;
    transition: transform 0.2s;
  }
  
  .users-table td {
    padding: 16px;
    border-top: 1px solid #f1f5f9;
    border-bottom: 1px solid #f1f5f9;
  }
  
  .users-table td:first-child {
    border-left: 1px solid #f1f5f9;
    border-top-left-radius: 8px;
    border-bottom-left-radius: 8px;
  }
  
  .users-table td:last-child {
    border-right: 1px solid #f1f5f9;
    border-top-right-radius: 8px;
    border-bottom-right-radius: 8px;
  }
  
  .user-name-cell {
    display: flex;
    align-items: center;
  }
  
  .badge-priority.admin { background-color: #fef2f2; color: #ef4444; border-color: #fee2e2; }
  .badge-priority.manager { background-color: #f0fdf4; color: #15803d; border-color: #dcfce7; }
  .badge-priority.employee { background-color: #eff6ff; color: #1d4ed8; border-color: #dbeafe; }
  
  .tasks-count-link {
    text-decoration: none;
    color: #64748b;
    font-weight: 600;
    font-size: 13px;
    padding: 4px 8px;
    background: #f8fafc;
    border-radius: 4px;
    transition: all 0.2s;
  }
  
  .tasks-count-link:hover {
    background: #e2e8f0;
    color: #1e293b;
  }
</style>
